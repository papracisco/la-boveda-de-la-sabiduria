<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>La Bóveda de la Sabiduría | Verdad Eterna</title>
    <link rel="icon" type="image/png" href="https://img.icons8.com/ios-filled/50/c5a059/sun--v1.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Cormorant+Garamond:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/tsparticles@2.12.0/tsparticles.bundle.min.js"></script>
    <style>
        :root { --oro: #c5a059; --pergamino: #f4eee0; --oscuro: #070707; --oro-brill: #ffd700; }
        body { background-color: var(--oscuro); color: var(--pergamino); font-family: 'Cormorant Garamond', serif; margin: 0; overflow-x: hidden; }
        #tsparticles { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; pointer-events: none; }
        .fuente-altar { font-family: 'Cinzel', serif; letter-spacing: 3px; }
        .borde-oro { border: 2px solid var(--oro); background: rgba(10, 10, 10, 0.95); position: relative; }
        .music-btn { position: fixed; bottom: 30px; right: 30px; z-index: 100; background: var(--oro); color: black; width: 60px; height: 60px; border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; border: none; box-shadow: 0 0 20px rgba(197, 160, 89, 0.4); }
        .promesa-card { border: 1px solid rgba(197, 160, 89, 0.2); background: rgba(20,20,20,0.5); transition: 0.4s; }
        .promesa-card:hover { border-color: var(--oro-brill); transform: translateY(-5px); }
        .input-boveda { background: rgba(255,255,255,0.05); border: 1px solid var(--oro); color: white; padding: 12px; width: 100%; outline: none; }
        .testimonio-card { background: rgba(197, 160, 89, 0.05); border-left: 3px solid var(--oro); padding: 15px; margin-bottom: 15px; }
        .custom-scrollbar::-webkit-scrollbar { width: 4px; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: var(--oro); }
    </style>
</head>
<body>

    <div id="tsparticles"></div>
    <audio id="audio-sacro" loop><source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-17.mp3" type="audio/mpeg"></audio>

    <button class="music-btn" onclick="toggleMusica()"><span id="music-icon" style="font-size: 24px;">▶</span></button>

    <div class="w-full py-3 bg-black/90 border-b border-yellow-900/30 text-[10px] fuente-altar text-center space-x-6 tracking-widest text-[var(--oro)]">
        <span>EMAIL: jfparadag2004@gmail.com</span>
        <span class="opacity-30">|</span>
        <span>INSTAGRAM: @josef_parada</span>
    </div>

    <div class="relative z-10">
        <header class="py-16 text-center">
            <h1 class="fuente-altar text-5xl md:text-7xl text-[var(--oro)] mb-6">LA BÓVEDA</h1>
            <div class="max-w-2xl mx-auto px-4 italic opacity-80 text-2xl md:text-3xl font-light">
                "En el principio era el Verbo, y el Verbo era con Dios, y el Verbo era Dios."
            </div>
            <p class="fuente-altar text-[var(--oro)] text-xs mt-4 tracking-[0.5em]">JUAN 1:1</p>
        </header>

        <main class="max-w-6xl mx-auto px-6 space-y-24">
            
            <div class="borde-oro p-10 text-center shadow-2xl">
                <h2 class="fuente-altar text-amber-600/70 text-xs mb-6 tracking-[0.4em]">Palabra de Poder</h2>
                <div id="contenedor-versiculo" class="min-h-[100px] transition-opacity duration-500">
                    <p id="texto-versiculo" class="text-3xl md:text-5xl italic font-light">"Someteos a Dios; resistid al diablo, y huirá."</p>
                    <p id="cita-versiculo" class="fuente-altar text-[var(--oro)] mt-6 text-sm uppercase">Santiago 4:7</p>
                </div>
                <button onclick="generarVersiculo()" class="mt-10 px-8 py-3 border border-[var(--oro)] text-[var(--oro)] fuente-altar text-[10px] hover:bg-[var(--oro)] hover:text-black transition-all cursor-pointer">
                    RECLAMAR PROMESA
                </button>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div onclick="abrirPergamino('lujuria')" class="borde-oro p-8 text-center cursor-pointer hover:bg-yellow-900/10 transition-all group">
                    <h3 class="fuente-altar text-xl group-hover:text-[var(--oro-brill)]">Vencer la Lujuria</h3>
                </div>
                <div onclick="abrirPergamino('proposito')" class="borde-oro p-8 text-center cursor-pointer hover:bg-yellow-900/10 transition-all group">
                    <h3 class="fuente-altar text-xl group-hover:text-[var(--oro-brill)]">El Propósito</h3>
                </div>
                <div onclick="abrirPergamino('salvacion')" class="borde-oro p-8 text-center cursor-pointer hover:bg-yellow-900/10 transition-all group">
                    <h3 class="fuente-altar text-xl group-hover:text-[var(--oro-brill)]">La Salvación</h3>
                </div>
            </div>

            <section>
                <h2 class="fuente-altar text-center text-3xl text-[var(--oro)] mb-12">Promesas al Vencedor</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                    <div class="promesa-card p-6 text-center">
                        <span class="text-[var(--oro)] text-xs fuente-altar">APOC. 2:7</span>
                        <p class="mt-4 italic text-lg">"Le daré a comer del árbol de la vida."</p>
                    </div>
                    <div class="promesa-card p-6 text-center">
                        <span class="text-[var(--oro)] text-xs fuente-altar">APOC. 2:17</span>
                        <p class="mt-4 italic text-lg">"Le daré una piedrecita blanca con un nombre nuevo."</p>
                    </div>
                    <div class="promesa-card p-6 text-center">
                        <span class="text-[var(--oro)] text-xs fuente-altar">APOC. 3:5</span>
                        <p class="mt-4 italic text-lg">"Será vestido de vestiduras blancas."</p>
                    </div>
                    <div class="promesa-card p-6 text-center">
                        <span class="text-[var(--oro)] text-xs fuente-altar">APOC. 3:21</span>
                        <p class="mt-4 italic text-lg">"Le daré que se siente conmigo en mi trono."</p>
                    </div>
                </div>
            </section>

            <div class="borde-oro p-8 md:p-12 shadow-2xl">
                <h2 class="fuente-altar text-2xl text-[var(--oro)] text-center mb-8">Muro de Testimonios</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-12">
                    <div>
                        <input type="text" id="inputNombre" placeholder="Tu nombre" class="input-boveda mb-4">
                        <textarea id="inputMensaje" rows="4" placeholder="Escribe tu testimonio..." class="input-boveda mb-4"></textarea>
                        <button onclick="enviarTestimonio()" class="w-full py-3 bg-[var(--oro)] text-black fuente-altar text-xs font-bold hover:brightness-110 transition-all">PUBLICAR</button>
                    </div>
                    <div id="listaTestimonios" class="max-h-[400px] overflow-y-auto pr-4 custom-scrollbar"></div>
                </div>
            </div>
        </main>

        <footer class="py-20 text-center opacity-30 text-xs fuente-altar">A.D. MMXXVI • NON NOBIS DOMINE</footer>
    </div>

    <div id="modalPergamino" class="fixed inset-0 z-[1000] hidden flex items-center justify-center p-4 bg-black/98 backdrop-blur-md">
        <div class="relative max-w-4xl w-full bg-[#f4eee0] p-8 md:p-16 text-slate-900 border-x-[15px] border-[var(--oro)]">
            <button onclick="cerrarPergamino()" class="absolute top-4 right-6 text-3xl cursor-pointer">✕</button>
            <div id="contenidoPergamino" class="space-y-6 overflow-y-auto max-h-[70vh] pr-4 text-lg leading-relaxed"></div>
        </div>
    </div>

    <script>
        const armadura = [
            { t: "No os ha sobrevenido ninguna tentación que no sea humana; pero fiel es Dios.", c: "1 CORINTIOS 10:13" },
            { t: "Todo lo puedo en Cristo que me fortalece.", c: "FILIPENSES 4:13" },
            { t: "Crea en mí, oh Dios, un corazón limpio.", c: "SALMOS 51:10" },
            { t: "Poned la mira en las cosas de arriba, no en las de la tierra.", c: "COLOSENSES 3:2" }
        ];

        const santuarios = {
            lujuria: `<h2 class="fuente-altar text-3xl text-amber-900 border-b pb-4">VENCER LA LUJURIA</h2><p>La victoria comienza en la huida (Génesis 39) y se mantiene con el pacto de los ojos (Job 31:1). No pelees con la carne, ríndete al Espíritu.</p>`,
            proposito: `<h2 class="fuente-altar text-3xl text-amber-900 border-b pb-4">EL PROPÓSITO</h2><p>Fuiste diseñado antes de la fundación del mundo para buenas obras. Tu propósito es glorificar a Dios en cada paso.</p>`,
            salvacion: `<h2 class="fuente-altar text-3xl text-amber-900 border-b pb-4">LA SALVACIÓN</h2><p>Es el regalo gratuito mediante la fe en Jesucristo. Reconoce, arrepiéntete y cree en Su sacrificio eterno.</p>`
        };

        function generarVersiculo() {
            const v = armadura[Math.floor(Math.random() * armadura.length)];
            const cont = document.getElementById('contenedor-versiculo');
            cont.style.opacity = 0;
            setTimeout(() => {
                document.getElementById('texto-versiculo').innerText = `"${v.t}"`;
                document.getElementById('cita-versiculo').innerText = v.c;
                cont.style.opacity = 1;
            }, 300);
        }

        function enviarTestimonio() {
            const nombre = document.getElementById('inputNombre').value || "Anónimo";
            const mensaje = document.getElementById('inputMensaje').value;
            if (!mensaje) return;
            const nuevo = { nombre, mensaje, fecha: new Date().toLocaleDateString() };
            let exs = JSON.parse(localStorage.getItem('boveda_msgs')) || [];
            exs.unshift(nuevo);
            localStorage.setItem('boveda_msgs', JSON.stringify(exs));
            document.getElementById('inputMensaje').value = "";
            cargarTestimonios();
        }

        function cargarTestimonios() {
            const lista = document.getElementById('listaTestimonios');
            const exs = JSON.parse(localStorage.getItem('boveda_msgs')) || [{nombre:"Bóveda", mensaje:"Bienvenido hermano.", fecha:"Hoy"}];
            lista.innerHTML = exs.map(t => `<div class="testimonio-card"><p class="text-[var(--oro)] fuente-altar text-[10px]">${t.nombre} - ${t.fecha}</p><p class="italic text-sm opacity-90">"${t.mensaje}"</p></div>`).join('');
        }

        function abrirPergamino(tipo) {
            document.getElementById('contenidoPergamino').innerHTML = santuarios[tipo];
            document.getElementById('modalPergamino').classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        }

        function cerrarPergamino() {
            document.getElementById('modalPergamino').classList.add('hidden');
            document.body.style.overflow = 'auto';
        }

        let sonando = false;
        function toggleMusica() {
            const audio = document.getElementById('audio-sacro');
            if(!sonando) { audio.play(); document.getElementById('music-icon').innerText = "⏸"; } 
            else { audio.pause(); document.getElementById('music-icon').innerText = "▶"; }
            sonando = !sonando;
        }

        tsParticles.load("tsparticles", {
            particles: { number: { value: 45 }, color: { value: "#c5a059" }, move: { enable: true, speed: 0.5, direction: "top" }, size: { value: 1.5 }, opacity: { value: 0.3 } }
        });

        window.onload = cargarTestimonios;
    </script>
</body>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<script>
  // Configuración con tus credenciales reales
  const _supabaseUrl = 'https://bgcrxdhetssoedlzwjsx.supabase.co';
  const _supabaseKey = 'sb_publishable_QW-89_uYQnGSDjEJnqR9jw_Nq7S3nAE';
  const _supabase = supabase.createClient(_supabaseUrl, _supabaseKey);

  // Función para guardar testimonios en la tabla de Supabase
  async function enviarTestimonio() {
    const nombreInput = document.getElementById('nombre');
    const mensajeInput = document.getElementById('mensaje');
    const nombre = nombreInput.value;
    const mensaje = mensajeInput.value;
    const fecha = new Date().toLocaleDateString();

    if (!nombre || !mensaje) return alert("Por favor, llena ambos campos");

    const { error } = await _supabase
      .from('Testimonios')
      .insert([{ nombre, mensaje, fecha }]);

    if (error) {
      console.error('Error al guardar:', error);
      alert('Error al guardar: ' + error.message);
    } else {
      nombreInput.value = '';
      mensajeInput.value = '';
      cargarTestimonios();
    }
  }

  // Función para leer los testimonios de la base de datos
  async function cargarTestimonios() {
    const { data, error } = await _supabase
      .from('Testimonios')
      .select('*')
      .order('id', { ascending: false });

    if (data) {
      const contenedor = document.getElementById('testimonios-container');
      contenedor.innerHTML = data.map(t => `
        <div class="testimonio-card p-4 rounded mb-4 border-l-4 border-oro bg-black/20">
          <p class="text-oro font-bold">${t.nombre} <span class="text-xs text-gray-400">(${t.fecha})</span></p>
          <p class="italic text-gray-200">"${t.mensaje}"</p>
        </div>
      `).join('');
    }
  }

  // Cargar automáticamente al abrir la página
  window.onload = cargarTestimonios;
</script>

</html>
